<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building Materials Product Entry</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
            color: #f39c12;
        }
        
        .header p {
            color: #ecf0f1;
            font-size: 14px;
        }
        
        .category-selector {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .category-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .category-btn {
            padding: 12px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .category-btn:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }
        
        .category-btn.active {
            border-color: #f39c12;
            background: #fff8e1;
            color: #e67e22;
        }
        
        .form-container {
            padding: 25px;
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }
        
        .form-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .form-group label {
            font-weight: bold;
            color: #2c3e50;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .form-group label span {
            color: #e74c3c;
            font-size: 18px;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .quantity-control button {
            width: 36px;
            height: 36px;
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .quantity-control button:hover {
            background: #e0e0e0;
        }
        
        .quantity-control input {
            width: 70px;
            text-align: center;
            border-left: none;
            border-right: none;
        }
        
        .image-preview {
            width: 200px;
            height: 200px;
            background: #f5f5f5;
            border: 2px dashed #ccc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .price-display {
            font-size: 24px;
            font-weight: bold;
            color: #27ae60;
            text-align: center;
            padding: 15px;
            background: #f8fff9;
            border-radius: 8px;
            border: 2px solid #27ae60;
            margin: 20px 0;
        }
        
        .form-actions {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
        }
        
        .btn-submit {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: white;
        }
        
        .btn-submit:hover {
            background: linear-gradient(135deg, #229954 0%, #1e8449 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        
        .btn-reset {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }
        
        .btn-reset:hover {
            background: linear-gradient(135deg, #c0392b 0%, #a93226 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }
        
        .result-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            display: none;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .unit-info {
            font-size: 12px;
            color: #666;
            margin-top: 3px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .category-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
        }
        
        @media (max-width: 480px) {
            .category-buttons {
                grid-template-columns: 1fr;
            }
            
            .container {
                margin: 10px;
            }
            
            .header h1 {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>


  <div id="navbar-container"></div>



    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è Building Materials Product Entry</h1>
            <p>Add new construction materials to inventory. Select a category to see specific fields.</p>
        </div>
        
        <div class="category-selector">
            <h3 style="color: #2c3e50; margin-bottom: 15px;">Select Material Category:</h3>
            <div class="category-buttons">
                <button class="category-btn active" onclick="selectCategory('cement')">
                    <span>üè≠</span> Cement
                </button>
                <button class="category-btn" onclick="selectCategory('bricks')">
                    <span>üß±</span> Bricks
                </button>
                <button class="category-btn" onclick="selectCategory('building-materials')">
                    <span>üèóÔ∏è</span> Building Materials
                </button>
                <button class="category-btn" onclick="selectCategory('iron-steel')">
                    <span>‚öôÔ∏è</span> Iron & Steel
                </button>
                <button class="category-btn" onclick="selectCategory('plumbing')">
                    <span>üö∞</span> Plumbing
                </button>
                <button class="category-btn" onclick="selectCategory('home-interior')">
                    <span>üé®</span> Home Interior
                </button>
            </div>
        </div>
        
        <div class="form-container">
            <form id="productForm">
                <!-- Common Fields Section -->
                <div class="form-section">
                    <h3>üìã Basic Information</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="productName">Product Name <span>*</span></label>
                            <input type="text" id="productName" name="productName" placeholder="Enter product name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="brand">Brand/Manufacturer</label>
                            <input type="text" id="brand" name="brand" placeholder="Enter brand name">
                        </div>
                        
                        <div class="form-group">
                            <label for="category">Category <span>*</span></label>
                            <input type="text" id="category" name="category" value="Cement" readonly style="background-color: #f0f0f0;">
                        </div>
                        
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea id="description" name="description" rows="3" placeholder="Enter product description"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- Pricing Section -->
                <div class="form-section">
                    <h3>üí∞ Pricing & Quantity</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="price">Price (‚Çπ) <span>*</span></label>
                            <input type="number" id="price" name="price" step="0.01" min="0" placeholder="0.00" required oninput="calculateDiscountedPrice()">
                        </div>
                        
                        <div class="form-group">
                            <label for="discount">Discount (%)</label>
                            <input type="number" id="discount" name="discount" min="0" max="100" placeholder="0" oninput="calculateDiscountedPrice()">
                        </div>
                        
                        <div class="form-group">
                            <label for="quantity">Quantity <span>*</span></label>
                            <div class="quantity-control">
                                <button type="button" onclick="changeQuantity(-1)">-</button>
                                <input type="number" id="quantity" name="quantity" min="1" step="1" value="1">
                                <button type="button" onclick="changeQuantity(1)">+</button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="quantityUnit">Unit <span>*</span></label>
                            <select id="quantityUnit" name="quantityUnit" required>
                                <option value="bag">Per Bag (50kg)</option>
                                <option value="bag-25kg">Per Bag (25kg)</option>
                                <option value="ton">Per Ton</option>
                                <option value="kg">Per KG</option>
                            </select>
                            <div class="unit-info" id="unitInfo">Standard cement packaging</div>
                        </div>
                    </div>
                    
                    <div class="price-display" id="finalPriceDisplay">
                        Final Price: ‚Çπ0.00
                    </div>
                </div>
                
                <!-- Category Specific Fields (Cement by default) -->
                <div class="form-section" id="categorySpecificSection">
                    <h3>üè≠ Cement Specific Details</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="cementType">Cement Type</label>
                            <select id="cementType" name="cementType">
                                <option value="">Select Type</option>
                                <option value="opc">OPC (Ordinary Portland Cement)</option>
                                <option value="ppc">PPC (Portland Pozzolana Cement)</option>
                                <option value="slag">Slag Cement</option>
                                <option value="white">White Cement</option>
                                <option value="rapid">Rapid Hardening Cement</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="grade">Grade</label>
                            <select id="grade" name="grade">
                                <option value="">Select Grade</option>
                                <option value="33">33 Grade</option>
                                <option value="43">43 Grade</option>
                                <option value="53">53 Grade</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="settingTime">Initial Setting Time (minutes)</label>
                            <input type="number" id="settingTime" name="settingTime" min="0" placeholder="e.g., 30">
                        </div>
                        
                        <div class="form-group">
                            <label for="compressiveStrength">Compressive Strength (MPa)</label>
                            <input type="number" id="compressiveStrength" name="compressiveStrength" step="0.1" min="0" placeholder="e.g., 43">
                        </div>
                    </div>
                </div>
                
                <!-- Image Upload Section -->
                <div class="form-section">
                    <h3>üñºÔ∏è Product Image</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="image">Upload Product Image</label>
                            <input type="file" id="image" name="image" accept="image/*" onchange="previewImage()">
                            <div class="unit-info">Recommended: 500x500px, JPG/PNG format</div>
                        </div>
                        
                        <div class="form-group">
                            <label>Image Preview</label>
                            <div class="image-preview" id="imagePreview">
                                No image selected
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rating & Additional Info -->
                <div class="form-section">
                    <h3>‚≠ê Quality & Additional Information</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="rating">Quality Rating (1-5)</label>
                            <input type="number" id="rating" name="rating" step="0.1" min="0" max="5" placeholder="4.5">
                        </div>
                        
                        <div class="form-group">
                            <label for="moq">Minimum Order Quantity (MOQ)</label>
                            <input type="number" id="moq" name="moq" min="1" placeholder="e.g., 10">
                        </div>
                        
                        <div class="form-group">
                            <label for="warranty">Warranty Period (months)</label>
                            <input type="number" id="warranty" name="warranty" min="0" placeholder="e.g., 12">
                        </div>
                        
                        <div class="form-group">
                            <label for="color">Color/Finish</label>
                            <input type="text" id="color" name="color" placeholder="e.g., Grey, White, etc.">
                        </div>
                    </div>
                </div>
                
                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-submit">
                        <span>‚úì</span> Submit Product
                    </button>
                    <button type="button" class="btn btn-reset" onclick="resetForm()">
                        <span>‚Ü∫</span> Reset Form
                    </button>
                </div>
                
                <!-- Result Message -->
                <div id="formResult" class="result-message"></div>
            </form>
        </div>
    </div>

    <script>
        // Current selected category
        let currentCategory = 'cement';
        
        // Category-specific field configurations
        const categoryConfigs = {
            'cement': {
                title: 'Cement Specific Details',
                unitOptions: [
                    {value: 'bag', text: 'Per Bag (50kg)', info: 'Standard cement packaging'},
                    {value: 'bag-25kg', text: 'Per Bag (25kg)', info: 'Smaller cement packaging'},
                    {value: 'ton', text: 'Per Ton', info: 'Bulk purchase'},
                    {value: 'kg', text: 'Per KG', info: 'Weight-based pricing'}
                ],
                fields: `
                    <div class="form-group">
                        <label for="cementType">Cement Type</label>
                        <select id="cementType" name="cementType">
                            <option value="">Select Type</option>
                            <option value="opc">OPC (Ordinary Portland Cement)</option>
                            <option value="ppc">PPC (Portland Pozzolana Cement)</option>
                            <option value="slag">Slag Cement</option>
                            <option value="white">White Cement</option>
                            <option value="rapid">Rapid Hardening Cement</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="grade">Grade</label>
                        <select id="grade" name="grade">
                            <option value="">Select Grade</option>
                            <option value="33">33 Grade</option>
                            <option value="43">43 Grade</option>
                            <option value="53">53 Grade</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="settingTime">Initial Setting Time (minutes)</label>
                        <input type="number" id="settingTime" name="settingTime" min="0" placeholder="e.g., 30">
                    </div>
                    <div class="form-group">
                        <label for="compressiveStrength">Compressive Strength (MPa)</label>
                        <input type="number" id="compressiveStrength" name="compressiveStrength" step="0.1" min="0" placeholder="e.g., 43">
                    </div>
                `
            },
            'bricks': {
                title: 'Bricks Specific Details',
                unitOptions: [
                    {value: 'piece', text: 'Per Piece', info: 'Individual brick'},
                    {value: '1000-piece', text: 'Per 1000 Pieces', info: 'Standard brick quantity'},
                    {value: 'sqft', text: 'Per Sq. Ft', info: 'Area coverage'},
                    {value: 'cubic', text: 'Per Cubic Meter', info: 'Volume measurement'}
                ],
                fields: `
                    <div class="form-group">
                        <label for="brickType">Brick Type</label>
                        <select id="brickType" name="brickType">
                            <option value="">Select Type</option>
                            <option value="clay">Clay Brick</option>
                            <option value="flyash">Fly Ash Brick</option>
                            <option value="concrete">Concrete Brick</option>
                            <option value="hollow">Hollow Brick</option>
                            <option value="perforated">Perforated Brick</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="size">Size (inches)</label>
                            <select id="size" name="size">
                            <option value="">Select Size</option>
                            <option value="9x4.5x3">9" √ó 4.5" √ó 3" (Standard)</option>
                            <option value="9x4.5x2.5">9" √ó 4.5" √ó 2.5"</option>
                            <option value="8x4x4">8" √ó 4" √ó 4"</option>
                            <option value="custom">Custom Size</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="weight">Weight per Piece (kg)</label>
                        <input type="number" id="weight" name="weight" step="0.1" min="0" placeholder="e.g., 2.5">
                    </div>
                    <div class="form-group">
                        <label for="compressiveStrength">Compressive Strength (N/mm¬≤)</label>
                        <input type="number" id="compressiveStrength" name="compressiveStrength" step="0.1" min="0" placeholder="e.g., 10">
                    </div>
                `
            },
            'building-materials': {
                title: 'Building Materials Details',
                unitOptions: [
                    {value: 'cft', text: 'Per CFT (Cubic Feet)', info: 'For aggregates, sand'},
                    {value: 'ton', text: 'Per Ton', info: 'Bulk materials'},
                    {value: 'bag', text: 'Per Bag', info: 'Packaged materials'},
                    {value: 'sqft', text: 'Per Sq. Ft', info: 'Sheet materials'},
                    {value: 'piece', text: 'Per Piece', info: 'Individual items'},
                    {value: 'roll', text: 'Per Roll', info: 'Rolled materials'}
                ],
                fields: `
                    <div class="form-group">
                        <label for="materialType">Material Type</label>
                        <select id="materialType" name="materialType">
                            <option value="">Select Type</option>
                            <option value="sand">Sand</option>
                            <option value="aggregate">Aggregate</option>
                            <option value="plywood">Plywood</option>
                            <option value="block">Concrete Block</option>
                            <option value="ready-mix">Ready Mix Concrete</option>
                            <option value="waterproofing">Waterproofing Material</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="thickness">Thickness (mm)</label>
                        <input type="number" id="thickness" name="thickness" min="0" placeholder="e.g., 12">
                    </div>
                    <div class="form-group">
                        <label for="density">Density (kg/m¬≥)</label>
                        <input type="number" id="density" name="density" min="0" placeholder="e.g., 2400">
                    </div>
                    <div class="form-group">
                        <label for="application">Application/Use</label>
                        <input type="text" id="application" name="application" placeholder="e.g., Flooring, Wall, Roof">
                    </div>
                `
            },
            'iron-steel': {
                title: 'Iron & Steel Details',
                unitOptions: [
                    {value: 'kg', text: 'Per KG', info: 'Weight-based pricing'},
                    {value: 'ton', text: 'Per Ton', info: 'Bulk purchase'},
                    {value: 'piece', text: 'Per Piece', info: 'Prefabricated items'},
                    {value: 'meter', text: 'Per Meter', info: 'Length-based pricing'}
                ],
                fields: `
                    <div class="form-group">
                        <label for="steelType">Steel Type</label>
                        <select id="steelType" name="steelType">
                            <option value="">Select Type</option>
                            <option value="tmt">TMT Bar</option>
                            <option value="mild">Mild Steel</option>
                            <option value="structural">Structural Steel</option>
                            <option value="stainless">Stainless Steel</option>
                            <option value="gi">GI Sheet</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="diameter">Diameter/Size (mm)</label>
                        <input type="number" id="diameter" name="diameter" step="0.1" min="0" placeholder="e.g., 8, 10, 12">
                    </div>
                    <div class="form-group">
                        <label for="grade">Steel Grade</label>
                        <select id="grade" name="grade">
                            <option value="">Select Grade</option>
                            <option value="fe415">Fe 415</option>
                            <option value="fe500">Fe 500</option>
                            <option value="fe550">Fe 550</option>
                            <option value="fe600">Fe 600</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="yieldStrength">Yield Strength (MPa)</label>
                        <input type="number" id="yieldStrength" name="yieldStrength" min="0" placeholder="e.g., 415">
                    </div>
                `
            },
            'plumbing': {
                title: 'Plumbing Materials Details',
                unitOptions: [
                    {value: 'piece', text: 'Per Piece', info: 'Individual item'},
                    {value: 'set', text: 'Per Set', info: 'Complete set'},
                    {value: 'meter', text: 'Per Meter', info: 'Pipe length'},
                    {value: 'kg', text: 'Per KG', info: 'Weight-based'},
                    {value: 'box', text: 'Per Box', info: 'Packaged items'}
                ],
                fields: `
                    <div class="form-group">
                        <label for="plumbingType">Plumbing Type</label>
                        <select id="plumbingType" name="plumbingType">
                            <option value="">Select Type</option>
                            <option value="pipe">Pipe</option>
                            <option value="fitting">Fitting</option>
                            <option value="sanitary">Sanitary Ware</option>
                            <option value="faucet">Faucet/Tap</option>
                            <option value="valve">Valve</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="material">Material</label>
                        <select id="material" name="material">
                            <option value="">Select Material</option>
                            <option value="pvc">PVC</option>
                            <option value="cpvc">CPVC</option>
                            <option value="gi">GI (Galvanized Iron)</option>
                            <option value="copper">Copper</option>
                            <option value="ceramic">Ceramic</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="diameter">Diameter (mm/inches)</label>
                        <input type="text" id="diameter" name="diameter" placeholder="e.g., 25mm or 1 inch">
                    </div>
                    <div class="form-group">
                        <label for="pressureRating">Pressure Rating (psi)</label>
                        <input type="number" id="pressureRating" name="pressureRating" min="0" placeholder="e.g., 150">
                    </div>
                `
            },
            'home-interior': {
                title: 'Home Interior Details',
                unitOptions: [
                    {value: 'sqft', text: 'Per Sq. Ft', info: 'Area-based pricing'},
                    {value: 'piece', text: 'Per Piece', info: 'Individual item'},
                    {value: 'set', text: 'Per Set', info: 'Complete set'},
                    {value: 'roll', text: 'Per Roll', info: 'Wallpaper, fabrics'},
                    {value: 'liter', text: 'Per Liter', info: 'Paints, finishes'}
                ],
                fields: `
                    <div class="form-group">
                        <label for="interiorType">Interior Type</label>
                        <select id="interiorType" name="interiorType">
                            <option value="">Select Type</option>
                            <option value="flooring">Flooring</option>
                            <option value="wall">Wall Finish</option>
                            <option value="ceiling">Ceiling</option>
                            <option value="door">Door</option>
                            <option value="window">Window</option>
                            <option value="furniture">Furniture</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="finishType">Finish Type</label>
                        <select id="finishType" name="finishType">
                            <option value="">Select Finish</option>
                            <option value="polished">Polished</option>
                            <option value="matt">Matt</option>
                            <option value="glossy">Glossy</option>
                            <option value="textured">Textured</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="coverage">Coverage Area (sq. ft per unit)</label>
                        <input type="number" id="coverage" name="coverage" min="0" placeholder="e.g., 100">
                    </div>
                    <div class="form-group">
                        <label for="installation">Installation Included</label>
                        <select id="installation" name="installation">
                            <option value="">Select Option</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                            <option value="extra">Extra Charge</option>
                        </select>
                    </div>
                `
            }
        };

        // Function to select category
        function selectCategory(category) {
            currentCategory = category;
            
            // Update active button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update category field
            document.getElementById('category').value = getCategoryDisplayName(category);
            
            // Update category-specific fields
            updateCategorySpecificFields();
        }

        // Function to get display name for category
        function getCategoryDisplayName(category) {
            const names = {
                'cement': 'Cement',
                'bricks': 'Bricks',
                'building-materials': 'Building Materials',
                'iron-steel': 'Iron & Steel',
                'plumbing': 'Plumbing',
                'home-interior': 'Home Interior'
            };
            return names[category] || category;
        }

        // Function to update category-specific fields
        function updateCategorySpecificFields() {
            const config = categoryConfigs[currentCategory];
            const section = document.getElementById('categorySpecificSection');
            
            // Update title
            section.querySelector('h3').innerHTML = `<span>${getCategoryIcon(currentCategory)}</span> ${config.title}`;
            
            // Update fields
            section.querySelector('.form-grid').innerHTML = config.fields;
            
            // Update unit options
            const unitSelect = document.getElementById('quantityUnit');
            unitSelect.innerHTML = '';
            config.unitOptions.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option.value;
                opt.textContent = option.text;
                unitSelect.appendChild(opt);
            });
            
            // Update unit info
            document.getElementById('unitInfo').textContent = config.unitOptions[0].info;
            
            // Add event listener for unit change
            unitSelect.addEventListener('change', function() {
                const selectedOption = config.unitOptions.find(opt => opt.value === this.value);
                if (selectedOption) {
                    document.getElementById('unitInfo').textContent = selectedOption.info;
                }
            });
        }

        // Function to get category icon
        function getCategoryIcon(category) {
            const icons = {
                'cement': 'üè≠',
                'bricks': 'üß±',
                'building-materials': 'üèóÔ∏è',
                'iron-steel': '‚öôÔ∏è',
                'plumbing': 'üö∞',
                'home-interior': 'üé®'
            };
            return icons[category] || 'üì¶';
        }

        // Function to change quantity
        function changeQuantity(change) {
            const quantityInput = document.getElementById('quantity');
            let current = parseInt(quantityInput.value) || 1;
            let newValue = current + change;
            newValue = Math.max(newValue, parseInt(quantityInput.min) || 1);
            quantityInput.value = newValue;
        }

        // Function to calculate discounted price
        function calculateDiscountedPrice() {
            try {
                const price = parseFloat(document.getElementById('price').value) || 0;
                const discount = parseFloat(document.getElementById('discount').value) || 0;
                const finalPrice = price - (price * (discount / 100));
                const quantity = parseInt(document.getElementById('quantity').value) || 1;
                const totalPrice = finalPrice * quantity;
                
                document.getElementById('finalPriceDisplay').innerHTML = 
                    `Final Price: <span style="font-size: 28px;">‚Çπ${finalPrice.toFixed(2)}</span><br>
                     <small style="font-size: 14px; color: #666;">Total (${quantity} units): ‚Çπ${totalPrice.toFixed(2)}</small>`;
            } catch (e) {
                console.warn('Price calculation failed:', e);
            }
        }

        // Function to preview image
        function previewImage() {
            const input = document.getElementById('image');
            const preview = document.getElementById('imagePreview');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `<img src="${e.target.result}" alt="Product Preview">`;
                }
                reader.onerror = function() {
                    preview.innerHTML = 'Error loading image';
                }
                reader.readAsDataURL(input.files[0]);
            } else {
                preview.innerHTML = 'No image selected';
            }
        }

        // Function to reset form
        function resetForm() {
            document.getElementById('productForm').reset();
            document.getElementById('imagePreview').innerHTML = 'No image selected';
            document.getElementById('finalPriceDisplay').innerHTML = 'Final Price: ‚Çπ0.00';
            document.getElementById('quantity').value = 1;
            selectCategory('cement'); // Reset to default category
            document.getElementById('formResult').innerHTML = '';
            document.getElementById('formResult').style.display = 'none';
        }

        // Form submission handler
        document.getElementById('productForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const resultDiv = document.getElementById('formResult');
            resultDiv.style.display = 'none';
            resultDiv.innerHTML = '';
            
            // Basic validation
            const productName = document.getElementById('productName').value.trim();
            const price = document.getElementById('price').value;
            
            if (!productName) {
                showResult('Product name is required', 'error');
                return;
            }
            
            if (!price || parseFloat(price) <= 0) {
                showResult('Valid price is required', 'error');
                return;
            }
            
            // Collect form data
            const formData = new FormData();
            
            // Add all form fields (except category - we'll add it separately)
            const formElements = this.elements;
            for (let element of formElements) {
                if (element.name && element.type !== 'file' && element.name !== 'category') {
                    formData.append(element.name, element.value);
                }
            }
            
            // Add image file
            const imageFile = document.getElementById('image').files[0];
            if (imageFile) {
                formData.append('image', imageFile);
            }
            
            // Add category (internal name, not display name)
            formData.append('category', currentCategory);
            
            // Calculate final price
            const finalPrice = calculateFinalPrice();
            formData.append('finalPrice', finalPrice);
            
            // Show loading
            showResult('üì§ Submitting product...', 'info');
            
            try {
                // Send to backend API
                const response = await fetch('http://localhost:5000/api/product_uploads', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (!response.ok || !data.success) {
                    showResult(`‚ùå Error: ${data.error || 'Failed to upload product'}`, 'error');
                    return;
                }
                
                // Success
                showResult(`
                    <strong>‚úÖ Product Submitted Successfully!</strong><br>
                    <small>Product: ${productName}<br>
                    Category: ${getCategoryDisplayName(currentCategory)}<br>
                    Final Price: ‚Çπ${finalPrice.toFixed(2)}<br>
                    ID: #${data.productId}</small>
                `, 'success');
                
                // Reset form after successful submission
                setTimeout(() => {
                    resetForm();
                }, 2000);
                
            } catch (error) {
                console.error('Upload error:', error);
                showResult(`‚ùå Error: ${error.message || 'Failed to upload product'}`, 'error');
            }
        });

        // Function to calculate final price
        function calculateFinalPrice() {
            const price = parseFloat(document.getElementById('price').value) || 0;
            const discount = parseFloat(document.getElementById('discount').value) || 0;
            return price - (price * (discount / 100));
        }

        // Function to show result message
        function showResult(message, type = 'info') {
            const resultDiv = document.getElementById('formResult');
            resultDiv.innerHTML = message;
            resultDiv.className = `result-message ${type}`;
            resultDiv.style.display = 'block';
            
            // Scroll to result
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Initialize form with default category
        window.onload = function() {
            updateCategorySpecificFields();
            
            // Add event listeners for real-time calculation
            document.getElementById('price').addEventListener('input', calculateDiscountedPrice);
            document.getElementById('discount').addEventListener('input', calculateDiscountedPrice);
            document.getElementById('quantity').addEventListener('input', calculateDiscountedPrice);
            
            // Calculate initial price
            calculateDiscountedPrice();
        };
    </script>




  <!-- Load Navbar Script -->
  <script>
  // Load shared navbar (injects navbar.html body and executes its scripts)
  async function includeNavbar() {
    try {
      const res = await fetch('navbar.html');
      const text = await res.text();
      const parser = new DOMParser();
      const doc = parser.parseFromString(text, 'text/html');
      document.getElementById('navbar-container').innerHTML = doc.body.innerHTML;

      // Execute scripts from navbar.html and wait for external scripts to load
      const __createdScriptPromises = [];
      doc.querySelectorAll('script').forEach(s => {
        const newScript = document.createElement('script');
        if (s.src) {
          newScript.src = s.src;
          newScript.async = false;
          __createdScriptPromises.push(new Promise(resolve => {
            newScript.addEventListener('load', resolve);
            newScript.addEventListener('error', resolve);
            setTimeout(resolve, 2000);
          }));
        } else {
          newScript.textContent = s.textContent;
        }
        document.body.appendChild(newScript);
      });
      Promise.all(__createdScriptPromises).finally(() => {});

      // Ensure navbar init functions run after dynamic injection (wait for external scripts to load)
      const __navbarScriptPromises = [];
      doc.querySelectorAll('script').forEach((s, i) => {
        const existing = document.querySelectorAll('script')[document.querySelectorAll('script').length - 1 - i];
        if (existing && existing.src) {
          __navbarScriptPromises.push(new Promise(resolve => {
            existing.addEventListener('load', resolve);
            existing.addEventListener('error', resolve);
            setTimeout(resolve, 2000);
          }));
        }
      });
      Promise.all(__navbarScriptPromises).finally(() => {
        if (typeof checkScreenSize === 'function') checkScreenSize();
        if (typeof addDesktopHoverEffects === 'function') addDesktopHoverEffects();
        if (typeof updateUserUI === 'function') updateUserUI();
        if (typeof updateCartBadge === 'function') updateCartBadge();
        if (typeof setActiveNavLink === 'function') setActiveNavLink();
      });
    } catch (e) {
      console.error('Failed to load navbar:', e);
    }
  }
  includeNavbar();
</script>


</body>
</html>